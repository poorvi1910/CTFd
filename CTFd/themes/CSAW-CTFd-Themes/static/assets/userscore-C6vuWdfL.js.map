{"version":3,"file":"userscore-C6vuWdfL.js","sources":["../../assets/js/utils/graphs/echarts/userscore.js"],"sourcesContent":["import { colorHash } from \"@ctfdio/ctfd-js/ui\";\nimport { cumulativeSum } from \"./scoreboard\";\nimport dayjs from \"dayjs\";\n\nexport function getOption(id, name, solves, awards) {\n  let option = {\n    title: {\n      left: \"center\",\n      text: \"Score over Time\",\n    },\n    tooltip: {\n      trigger: \"axis\",\n      axisPointer: {\n        type: \"cross\",\n      },\n    },\n    legend: {\n      type: \"scroll\",\n      orient: \"horizontal\",\n      align: \"left\",\n      bottom: 0,\n      data: [name],\n    },\n    toolbox: {\n      feature: {\n        saveAsImage: {},\n      },\n    },\n    grid: {\n      containLabel: true,\n    },\n    xAxis: [\n      {\n        type: \"category\",\n        boundaryGap: false,\n        data: [],\n      },\n    ],\n    yAxis: [\n      {\n        type: \"value\",\n      },\n    ],\n    dataZoom: [\n      {\n        id: \"dataZoomX\",\n        type: \"slider\",\n        xAxisIndex: [0],\n        filterMode: \"filter\",\n        height: 20,\n        top: 35,\n        fillerColor: \"rgba(233, 236, 241, 0.4)\",\n      },\n    ],\n    series: [],\n  };\n\n  const times = [];\n  const scores = [];\n  const total = solves.concat(awards);\n\n  total.sort((a, b) => {\n    return new Date(a.date) - new Date(b.date);\n  });\n\n  for (let i = 0; i < total.length; i++) {\n    const date = dayjs(total[i].date);\n    times.push(date.toDate());\n    try {\n      scores.push(total[i].challenge.value);\n    } catch (e) {\n      scores.push(total[i].value);\n    }\n  }\n\n  times.forEach(time => {\n    option.xAxis[0].data.push(time);\n  });\n\n  option.series.push({\n    name: name,\n    type: \"line\",\n    label: {\n      normal: {\n        show: true,\n        position: \"top\",\n      },\n    },\n    areaStyle: {\n      normal: {\n        color: colorHash(name + id),\n      },\n    },\n    itemStyle: {\n      normal: {\n        color: colorHash(name + id),\n      },\n    },\n    data: cumulativeSum(scores),\n  });\n  return option;\n}\n"],"names":["getOption","id","name","solves","awards","option","times","scores","total","a","b","i","date","dayjs","time","colorHash","cumulativeSum"],"mappings":"kFAIO,SAASA,EAAUC,EAAIC,EAAMC,EAAQC,EAAQ,CAClD,IAAIC,EAAS,CACX,MAAO,CACL,KAAM,SACN,KAAM,iBACP,EACD,QAAS,CACP,QAAS,OACT,YAAa,CACX,KAAM,OACP,CACF,EACD,OAAQ,CACN,KAAM,SACN,OAAQ,aACR,MAAO,OACP,OAAQ,EACR,KAAM,CAACH,CAAI,CACZ,EACD,QAAS,CACP,QAAS,CACP,YAAa,CAAE,CAChB,CACF,EACD,KAAM,CACJ,aAAc,EACf,EACD,MAAO,CACL,CACE,KAAM,WACN,YAAa,GACb,KAAM,CAAE,CACT,CACF,EACD,MAAO,CACL,CACE,KAAM,OACP,CACF,EACD,SAAU,CACR,CACE,GAAI,YACJ,KAAM,SACN,WAAY,CAAC,CAAC,EACd,WAAY,SACZ,OAAQ,GACR,IAAK,GACL,YAAa,0BACd,CACF,EACD,OAAQ,CAAE,CACd,EAEE,MAAMI,EAAQ,CAAA,EACRC,EAAS,CAAA,EACTC,EAAQL,EAAO,OAAOC,CAAM,EAElCI,EAAM,KAAK,CAACC,EAAGC,IACN,IAAI,KAAKD,EAAE,IAAI,EAAI,IAAI,KAAKC,EAAE,IAAI,CAC1C,EAED,QAASC,EAAI,EAAGA,EAAIH,EAAM,OAAQG,IAAK,CACrC,MAAMC,EAAOC,EAAML,EAAMG,CAAC,EAAE,IAAI,EAChCL,EAAM,KAAKM,EAAK,OAAQ,CAAA,EACxB,GAAI,CACFL,EAAO,KAAKC,EAAMG,CAAC,EAAE,UAAU,KAAK,CACrC,MAAW,CACVJ,EAAO,KAAKC,EAAMG,CAAC,EAAE,KAAK,CAC3B,CACF,CAED,OAAAL,EAAM,QAAQQ,GAAQ,CACpBT,EAAO,MAAM,CAAC,EAAE,KAAK,KAAKS,CAAI,CAClC,CAAG,EAEDT,EAAO,OAAO,KAAK,CACjB,KAAMH,EACN,KAAM,OACN,MAAO,CACL,OAAQ,CACN,KAAM,GACN,SAAU,KACX,CACF,EACD,UAAW,CACT,OAAQ,CACN,MAAOa,EAAUb,EAAOD,CAAE,CAC3B,CACF,EACD,UAAW,CACT,OAAQ,CACN,MAAOc,EAAUb,EAAOD,CAAE,CAC3B,CACF,EACD,KAAMe,EAAcT,CAAM,CAC9B,CAAG,EACMF,CACT"}
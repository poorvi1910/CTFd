{"version":3,"file":"scoreboard-D-j4TA9F.js","sources":["../../assets/js/scoreboard.js"],"sourcesContent":["import Alpine from \"alpinejs\";\nimport CTFd from \"./index\";\nimport { getOption } from \"./utils/graphs/echarts/scoreboard\";\nimport { embed } from \"./utils/graphs/echarts\";\n\nwindow.Alpine = Alpine;\nwindow.CTFd = CTFd;\n\n// Default scoreboard polling interval to every 5 minutes\nconst scoreboardUpdateInterval = window.scoreboardUpdateInterval || 300000;\n\nAlpine.data(\"ScoreboardDetail\", () => ({\n  data: {},\n  show: true,\n\n  async update() {\n    this.data = await CTFd.pages.scoreboard.getScoreboardDetail(10);\n\n    let option = getOption(CTFd.config.userMode, this.data);\n    embed(this.$refs.scoregraph, option);\n    this.show = Object.keys(this.data).length > 0;\n  },\n\n  async init() {\n    this.update();\n\n    setInterval(() => {\n      this.update();\n    }, scoreboardUpdateInterval);\n  },\n}));\n\nAlpine.data(\"ScoreboardList\", () => ({\n  standings: [],\n  brackets: [],\n  activeBracket: null,\n\n  async update() {\n    let response = await CTFd.fetch(`/api/v1/brackets?type=${CTFd.config.userMode}`, {\n      method: \"GET\",\n    });\n    const body = await response.json();\n    this.brackets = body[\"data\"];\n    this.standings = await CTFd.pages.scoreboard.getScoreboard();\n  },\n\n  async init() {\n    this.update();\n\n    setInterval(() => {\n      this.update();\n    }, scoreboardUpdateInterval);\n  },\n}));\n\nAlpine.start();\n"],"names":["Alpine","CTFd","scoreboardUpdateInterval","option","getOption","embed","body"],"mappings":"4HAKA,OAAO,OAASA,EAChB,OAAO,KAAOC,EAGd,MAAMC,EAA2B,OAAO,0BAA4B,IAEpEF,EAAO,KAAK,mBAAoB,KAAO,CACrC,KAAM,CAAE,EACR,KAAM,GAEN,MAAM,QAAS,CACb,KAAK,KAAO,MAAMC,EAAK,MAAM,WAAW,oBAAoB,EAAE,EAE9D,IAAIE,EAASC,EAAUH,EAAK,OAAO,SAAU,KAAK,IAAI,EACtDI,EAAM,KAAK,MAAM,WAAYF,CAAM,EACnC,KAAK,KAAO,OAAO,KAAK,KAAK,IAAI,EAAE,OAAS,CAC7C,EAED,MAAM,MAAO,CACX,KAAK,OAAM,EAEX,YAAY,IAAM,CAChB,KAAK,OAAM,CACZ,EAAED,CAAwB,CAC5B,CACH,EAAE,EAEFF,EAAO,KAAK,iBAAkB,KAAO,CACnC,UAAW,CAAE,EACb,SAAU,CAAE,EACZ,cAAe,KAEf,MAAM,QAAS,CAIb,MAAMM,EAAO,MAHE,MAAML,EAAK,MAAM,yBAAyBA,EAAK,OAAO,QAAQ,GAAI,CAC/E,OAAQ,KACd,CAAK,GAC2B,OAC5B,KAAK,SAAWK,EAAK,KACrB,KAAK,UAAY,MAAML,EAAK,MAAM,WAAW,eAC9C,EAED,MAAM,MAAO,CACX,KAAK,OAAM,EAEX,YAAY,IAAM,CAChB,KAAK,OAAM,CACZ,EAAEC,CAAwB,CAC5B,CACH,EAAE,EAEFF,EAAO,MAAO"}
{"version":3,"file":"index-BRC8HQ24.js","sources":["../../assets/js/utils/graphs/echarts/scoreboard.js","../../assets/js/utils/graphs/echarts/index.js"],"sourcesContent":["import { colorHash } from \"@ctfdio/ctfd-js/ui\";\nimport dayjs from \"dayjs\";\n\nexport function cumulativeSum(arr) {\n  let result = arr.concat();\n  for (let i = 0; i < arr.length; i++) {\n    result[i] = arr.slice(0, i + 1).reduce(function (p, i) {\n      return p + i;\n    });\n  }\n  return result;\n}\n\nexport function getOption(mode, places) {\n  let option = {\n    title: {\n      left: \"center\",\n      text: \"Top 10 \" + (mode === \"teams\" ? \"Teams\" : \"Users\"),\n    },\n    tooltip: {\n      trigger: \"axis\",\n      axisPointer: {\n        type: \"cross\",\n      },\n    },\n    legend: {\n      type: \"scroll\",\n      orient: \"horizontal\",\n      align: \"left\",\n      bottom: 35,\n      data: [],\n    },\n    toolbox: {\n      feature: {\n        dataZoom: {\n          yAxisIndex: \"none\",\n        },\n        saveAsImage: {},\n      },\n    },\n    grid: {\n      containLabel: true,\n    },\n    xAxis: [\n      {\n        type: \"time\",\n        boundaryGap: false,\n        data: [],\n      },\n    ],\n    yAxis: [\n      {\n        type: \"value\",\n      },\n    ],\n    dataZoom: [\n      {\n        id: \"dataZoomX\",\n        type: \"slider\",\n        xAxisIndex: [0],\n        filterMode: \"filter\",\n        height: 20,\n        top: 35,\n        fillerColor: \"rgba(233, 236, 241, 0.4)\",\n      },\n    ],\n    series: [],\n  };\n\n  const teams = Object.keys(places);\n  for (let i = 0; i < teams.length; i++) {\n    const team_score = [];\n    const times = [];\n    for (let j = 0; j < places[teams[i]][\"solves\"].length; j++) {\n      team_score.push(places[teams[i]][\"solves\"][j].value);\n      const date = dayjs(places[teams[i]][\"solves\"][j].date);\n      times.push(date.toDate());\n    }\n\n    const total_scores = cumulativeSum(team_score);\n    let scores = times.map(function (e, i) {\n      return [e, total_scores[i]];\n    });\n\n    option.legend.data.push(places[teams[i]][\"name\"]);\n\n    const data = {\n      name: places[teams[i]][\"name\"],\n      type: \"line\",\n      label: {\n        normal: {\n          position: \"top\",\n        },\n      },\n      itemStyle: {\n        normal: {\n          color: colorHash(places[teams[i]][\"name\"] + places[teams[i]][\"id\"]),\n        },\n      },\n      data: scores,\n    };\n    option.series.push(data);\n  }\n\n  return option;\n}\n","import * as echarts from \"echarts/core\";\nimport { LineChart } from \"echarts/charts\";\nimport {\n  TitleComponent,\n  TooltipComponent,\n  GridComponent,\n  DatasetComponent,\n  TransformComponent,\n  LegendComponent,\n  ToolboxComponent,\n  DataZoomComponent,\n} from \"echarts/components\";\n// Features like Universal Transition and Label Layout\nimport { LabelLayout, UniversalTransition } from \"echarts/features\";\n// Import the Canvas renderer\n// Note that introducing the CanvasRenderer or SVGRenderer is a required step\nimport { CanvasRenderer } from \"echarts/renderers\";\n\n// Register the required components\necharts.use([\n  LineChart,\n  TitleComponent,\n  TooltipComponent,\n  GridComponent,\n  DatasetComponent,\n  TransformComponent,\n  LegendComponent,\n  ToolboxComponent,\n  DataZoomComponent,\n  LabelLayout,\n  UniversalTransition,\n  CanvasRenderer,\n]);\n\nexport function embed(target, option) {\n  let chart = echarts.init(target);\n  chart.setOption(option);\n\n  window.addEventListener(\"resize\", () => {\n    if (chart) {\n      chart.resize();\n    }\n  });\n}\n"],"names":["cumulativeSum","arr","result","i","p","getOption","mode","places","option","teams","team_score","times","j","date","dayjs","total_scores","scores","e","data","colorHash","echarts.use","LineChart","TitleComponent","TooltipComponent","GridComponent","DatasetComponent","TransformComponent","LegendComponent","ToolboxComponent","DataZoomComponent","LabelLayout","UniversalTransition","CanvasRenderer","embed","target","chart","echarts.init"],"mappings":"oLAGO,SAASA,EAAcC,EAAK,CACjC,IAAIC,EAASD,EAAI,SACjB,QAASE,EAAI,EAAGA,EAAIF,EAAI,OAAQE,IAC9BD,EAAOC,CAAC,EAAIF,EAAI,MAAM,EAAGE,EAAI,CAAC,EAAE,OAAO,SAAUC,EAAGD,EAAG,CACrD,OAAOC,EAAID,CACjB,CAAK,EAEH,OAAOD,CACT,CAEO,SAASG,EAAUC,EAAMC,EAAQ,CACtC,IAAIC,EAAS,CACX,MAAO,CACL,KAAM,SACN,KAAM,WAAaF,IAAS,QAAU,QAAU,QACjD,EACD,QAAS,CACP,QAAS,OACT,YAAa,CACX,KAAM,OACP,CACF,EACD,OAAQ,CACN,KAAM,SACN,OAAQ,aACR,MAAO,OACP,OAAQ,GACR,KAAM,CAAE,CACT,EACD,QAAS,CACP,QAAS,CACP,SAAU,CACR,WAAY,MACb,EACD,YAAa,CAAE,CAChB,CACF,EACD,KAAM,CACJ,aAAc,EACf,EACD,MAAO,CACL,CACE,KAAM,OACN,YAAa,GACb,KAAM,CAAE,CACT,CACF,EACD,MAAO,CACL,CACE,KAAM,OACP,CACF,EACD,SAAU,CACR,CACE,GAAI,YACJ,KAAM,SACN,WAAY,CAAC,CAAC,EACd,WAAY,SACZ,OAAQ,GACR,IAAK,GACL,YAAa,0BACd,CACF,EACD,OAAQ,CAAE,CACd,EAEE,MAAMG,EAAQ,OAAO,KAAKF,CAAM,EAChC,QAASJ,EAAI,EAAGA,EAAIM,EAAM,OAAQN,IAAK,CACrC,MAAMO,EAAa,CAAA,EACbC,EAAQ,CAAA,EACd,QAASC,EAAI,EAAGA,EAAIL,EAAOE,EAAMN,CAAC,CAAC,EAAE,OAAU,OAAQS,IAAK,CAC1DF,EAAW,KAAKH,EAAOE,EAAMN,CAAC,CAAC,EAAE,OAAUS,CAAC,EAAE,KAAK,EACnD,MAAMC,EAAOC,EAAMP,EAAOE,EAAMN,CAAC,CAAC,EAAE,OAAUS,CAAC,EAAE,IAAI,EACrDD,EAAM,KAAKE,EAAK,OAAQ,CAAA,CACzB,CAED,MAAME,EAAef,EAAcU,CAAU,EAC7C,IAAIM,EAASL,EAAM,IAAI,SAAUM,EAAG,EAAG,CACrC,MAAO,CAACA,EAAGF,EAAa,CAAC,CAAC,CAChC,CAAK,EAEDP,EAAO,OAAO,KAAK,KAAKD,EAAOE,EAAMN,CAAC,CAAC,EAAE,IAAO,EAEhD,MAAMe,EAAO,CACX,KAAMX,EAAOE,EAAMN,CAAC,CAAC,EAAE,KACvB,KAAM,OACN,MAAO,CACL,OAAQ,CACN,SAAU,KACX,CACF,EACD,UAAW,CACT,OAAQ,CACN,MAAOgB,EAAUZ,EAAOE,EAAMN,CAAC,CAAC,EAAE,KAAUI,EAAOE,EAAMN,CAAC,CAAC,EAAE,EAAK,CACnE,CACF,EACD,KAAMa,CACZ,EACIR,EAAO,OAAO,KAAKU,CAAI,CACxB,CAED,OAAOV,CACT,CCtFAY,EAAY,CACVC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,CACF,CAAC,EAEM,SAASC,EAAMC,EAAQ1B,EAAQ,CACpC,IAAI2B,EAAQC,EAAaF,CAAM,EAC/BC,EAAM,UAAU3B,CAAM,EAEtB,OAAO,iBAAiB,SAAU,IAAM,CAClC2B,GACFA,EAAM,OAAM,CAElB,CAAG,CACH"}